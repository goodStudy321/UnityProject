{include file='public/head'}
<div class="layui-field-box">
  <button class="layui-btn layui-btn-sm " onclick="x_admin_show('添加服务器分类','categoryAdd.html',500,350)"></i>添加服务器分类</button>
  <button class="layui-btn layui-btn-sm " onclick="javascript:location.href='/admin/dataserver/index'"></i>返回</button>
  <button onclick="javascript:location.reload()" class="layui-btn layui-btn-sm">刷新</button>
  <br>
  <br>
  <table id="table" lay-filter="test"></table>
</div>
{include file='public/foot'}

<script>
  //表格
  layui.use('table', function(){
    var table = layui.table;
    //第一个实例
    var tableIns = table.render({
      elem: '#table'
      ,url: 'categoryData' //数据接口
      ,page: true //开启分页
      ,cols: [[ //标题栏
      {align: 'center',field:'index_id', title: '记录ID',width:160}
      ,{align: 'center',field:'router_id', title: 'Router ID'}
      ,{align: 'center',field:'name', title: '标题名'}
      ,{align: 'center',field:'begin_id', title: '开始ID'}
      ,{align: 'center',field:'end_id', title: '结束ID'}
      ,{align: 'center',field:'add_time', title: '创建时间', width:143}
      ,{align: 'center',field:'action', title: '操作', width:243}
      ]]
    });
    $("#submit").click(function(){
      var data = {};
      $.each($('form').serializeArray(), function(){
        data[this.name] = this.value;
      })
      tableIns.reload({
        where: data   //设定异步数据接口的额外参数，任意设
        ,page: {
          curr: 1 //重新从第 1 页开始
        }
      });
    });
  });
  function del(id){
    if(!confirm('确定删除吗？'))
      return;
    $.post('/admin/dataserver/categoryDel', {id:id}, function(data){
      if(data.status.code == 10200){
        window.location.reload();
        return;
      }
    }, 'json')
  }
</script>
