{include file='public/head'}
<div class="layui-field-box">
  <blockquote class="layui-elem-quote">
    <form class="layui-form" onsubmit="return false">
      <div class="layui-inline">
        <label class="layui-form-label" style="width:50px">标题:</label>
        <div class="layui-input-inline" style="width:150px">
          <input type="text" name="title_strings"  class="layui-input">
        </div>
      </div>
      <div class="layui-inline">
        <label class="layui-form-label" style="width:50px">渠道ID:</label>
        <div class="layui-input-inline" style="width:150px">
          <input type="text" name="channel_id"  class="layui-input">
        </div>
      </div>
      <div class="layui-inline">
        <label class="layui-form-label" style="width:55px">包渠道ID:</label>
        <div class="layui-input-inline" style="width:150px">
          <input type="text" name="game_channel_id"  class="layui-input">
        </div>
      </div>
      <div class="layui-inline">
        <label class="layui-form-label" style="width:55px">发送时间:</label>
        <div class="layui-input-inline">
          <input class="layui-input" id="time"  type="text" autocomplete="off" name="send_time">
        </div>
      </div>
      <div class="layui-inline">
        <div class="layui-input-inline">
          <button class="layui-btn layui-btn-sm" id="submit">查询</button>
          <button onclick="javascript:location.reload()" class="layui-btn layui-btn-sm">刷新</button>
        </div>
      </div>
    </form>
  </blockquote>
  <table id="table" class="layui-hide" lay-filter="test"></table>
</div>
{include file='public/foot'}

<script>
  layui.use('laydate', function() {
    var laydate = layui.laydate;
    laydate.render({
      elem: '#time'
      ,max:0
    ,range:true
    });
  });
  
  //表格
  layui.use('table', function(){
    var table = layui.table;
    //第一个实例
    var tableIns = table.render({
      elem: '#table'
      ,url: 'mailData' //数据接口
      ,page: true //开启分页
      ,cols: [[ //标题栏
        {align: 'center' , field:'id'                , title: '记录ID'                 , width:150 } ,
        {align: 'center' , field:'time'              , title: '发送时间'               , width:150 } ,
        {align: 'center' , field:'title_strings'     , title: '邮件标题'               , width:150 } ,
        {align: 'center' , field:'text_strings'      , title: '邮件内容'               } ,
        {align: 'center' , field:'role_name'         , title: '角色名称'               , width:150 } ,
        {align: 'center' , field:'gold'              , title: '发送元宝'               , width:100 } ,
        {align: 'center' , field:'goods_list'        , title: '道具 - 数量 - 是否绑定' } ,
        {align: 'center' , field:'channel_name'      , title: '渠道'                   , width:150 } ,
        {align: 'center' , field:'game_channel_name' , title: '包渠道'                 , width:150 } ,
      ]]
    });
    $("#submit").click(function(){
      var data = {};
      $.each($('form').serializeArray(), function(){
        data[this.name] = this.value;
      })

      tableIns.reload({
        where: data   //设定异步数据接口的额外参数，任意设
        ,page: {
      curr: 1 //重新从第 1 页开始
        }
      });
    });
  });
</script>
