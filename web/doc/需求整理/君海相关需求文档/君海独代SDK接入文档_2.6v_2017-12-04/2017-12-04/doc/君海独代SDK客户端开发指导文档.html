<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>君海独代SDK客户端开发指导文档.md</title><link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css'><style type='text/css'>html, body {overflow-x: initial !important;}.CodeMirror { height: auto; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; }
.CodeMirror-lines { padding: 4px 0px; }
.CodeMirror pre { }
.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { background-color: white; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background-color: rgb(247, 247, 247); white-space: nowrap; }
.CodeMirror-linenumbers { }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.CodeMirror div.CodeMirror-cursor { border-left: 1px solid black; z-index: 3; }
.CodeMirror div.CodeMirror-secondarycursor { border-left: 1px solid silver; }
.CodeMirror.cm-keymap-fat-cursor div.CodeMirror-cursor { width: auto; border: 0px; background: rgb(119, 238, 119); z-index: 1; }
.CodeMirror div.CodeMirror-cursor.CodeMirror-overwrite { }
.cm-tab { display: inline-block; }
.cm-s-typora-default .cm-header, .cm-s-typora-default .cm-property { color: rgb(217, 79, 138); }
.cm-s-typora-default pre.cm-header1:not(.cm-atom) :not(.cm-overlay) { font-size: 2rem; line-height: 2rem; }
.cm-s-typora-default pre.cm-header2:not(.cm-atom) :not(.cm-overlay) { font-size: 1.4rem; line-height: 1.4rem; }
.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number { color: rgb(149, 132, 134); }
.cm-s-typora-default .cm-table-row, .cm-s-typora-default .cm-block-start { font-family: monospace; }
.cm-s-typora-default .cm-comment, .cm-s-typora-default .cm-code { color: rgb(74, 90, 159); font-family: monospace; }
.cm-s-typora-default .cm-tag { color: rgb(169, 68, 66); }
.cm-s-typora-default .cm-string { color: rgb(126, 134, 169); }
.cm-s-typora-default .cm-link { color: rgb(196, 122, 15); text-decoration: underline; }
.cm-s-typora-default .cm-variable-2, .cm-s-typora-default .cm-variable-1 { color: inherit; }
.cm-s-typora-default .cm-overlay { font-size: 1rem; font-family: monospace; }
.CodeMirror.cm-s-typora-default div.CodeMirror-cursor { border-left: 3px solid rgb(228, 98, 154); }
.cm-s-typora-default .CodeMirror-activeline-background { left: -60px; right: -30px; background: rgba(204, 204, 204, 0.2); }
.cm-s-typora-default .CodeMirror-gutters { border-right: none; background-color: inherit; }
.cm-s-typora-default .cm-trailing-space-new-line::after, .cm-startspace::after, .cm-starttab .cm-tab::after { content: "•"; position: absolute; left: 0px; opacity: 0; font-family: LetterGothicStd, monospace; }
.os-windows .cm-startspace::after, .os-windows .cm-starttab .cm-tab::after { left: -0.1em; }
.cm-starttab .cm-tab::after { content: " "; }
.cm-startspace, .cm-tab, .cm-starttab, .cm-trailing-space-a, .cm-trailing-space-b, .cm-trailing-space-new-line { font-family: monospace; position: relative; }
.cm-s-typora-default .cm-trailing-space-new-line::after { content: "↓"; opacity: 0.3; }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: black; }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-property { color: black; }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: blue; }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: bold; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: rgb(255, 0, 0); }
.cm-invalidchar { color: rgb(255, 0, 0); }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; padding-right: 30px; height: 100%; outline: none; position: relative; box-sizing: content-box; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow-x: hidden; overflow-y: scroll; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: transparent; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-widget { }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.CodeMirror-selected { background: rgb(217, 217, 217); }
.CodeMirror-focused .CodeMirror-selected { background: rgb(215, 212, 240); }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
.CodeMirror span { }
@media print { 
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}
.CodeMirror-lint-markers { width: 16px; }
.CodeMirror-lint-tooltip { background-color: infobackground; border: 1px solid black; border-radius: 4px; color: infotext; font-family: monospace; overflow: hidden; padding: 2px 5px; position: fixed; white-space: pre-wrap; z-index: 10000; max-width: 600px; opacity: 0; transition: opacity 0.4s; font-size: 0.8em; }
.CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning { background-position: left bottom; background-repeat: repeat-x; }
.CodeMirror-lint-mark-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg=="); }
.CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning { background-position: center center; background-repeat: no-repeat; cursor: pointer; display: inline-block; height: 16px; width: 16px; vertical-align: middle; position: relative; }
.CodeMirror-lint-message-error, .CodeMirror-lint-message-warning { padding-left: 18px; background-position: left top; background-repeat: no-repeat; }
.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-multiple { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC"); background-repeat: no-repeat; background-position: right bottom; width: 100%; height: 100%; }


html { font-size: 14px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { background: rgb(181, 214, 252); text-shadow: none; }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; overflow-x: auto; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
@media screen and (max-width: 500px) { 
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
.typora-export #write { margin: 0px auto; }
#write > p:first-child, #write > ul:first-child, #write > ol:first-child, #write > pre:first-child, #write > blockquote:first-child, #write > div:first-child, #write > table:first-child { margin-top: 30px; }
#write li > table:first-child { margin-top: -20px; }
img { max-width: 100%; vertical-align: middle; }
input, button, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
::before, ::after, * { box-sizing: border-box; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write div, #write pre { width: inherit; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6 { position: relative; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; }
.mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0rem; -webkit-margin-after: 0rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: bold; font-style: italic; }
a { cursor: pointer; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; margin: 4px 0px 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
pre { white-space: pre-wrap; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
.md-fences .CodeMirror.CodeMirror-wrap { top: -1.6em; margin-bottom: -1.6em; }
.md-fences.mock-cm { white-space: pre-wrap; }
.show-fences-line-number .md-fences { padding-left: 0px; }
.show-fences-line-number .md-fences.mock-cm { padding-left: 40px; }
.footnotes { opacity: 0.8; font-size: 0.9rem; padding-top: 1em; padding-bottom: 1em; }
.footnotes + .footnotes { margin-top: -1em; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: transparent; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: normal; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li p, li .mathjax-block { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; }
@media print { 
  html, body { height: 100%; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  h1, h2, h3, h4, h5, h6 { break-after: avoid-page; orphans: 2; }
  p { orphans: 4; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0mm; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 2.86rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.mathjax-block { white-space: pre; overflow: hidden; width: 100%; }
p + .mathjax-block { margin-top: -1.143rem; }
.mathjax-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: none; box-shadow: none; }
.task-list { list-style-type: none; }
.task-list-item { position: relative; padding-left: 1em; }
.task-list-item input { position: absolute; top: 0px; left: 0px; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc::after, .md-toc-content::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); text-decoration: none; }
.md-toc-inner:hover { }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: bold; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) { 
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
.md-tag { opacity: 0.5; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: monospace; }
code { text-align: left; }
h1 .md-tag, h2 .md-tag, h3 .md-tag, h4 .md-tag, h5 .md-tag, h6 .md-tag { font-weight: initial; opacity: 0.35; }
a.md-print-anchor { border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: none !important; background: transparent !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0em; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: monospace; }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: normal; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }


@font-face { font-family: "Open Sans"; font-style: normal; font-weight: normal; src: local("Open Sans Regular"), url("./github/400.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: normal; src: local("Open Sans Italic"), url("./github/400i.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: bold; src: local("Open Sans Bold"), url("./github/700.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: bold; src: local("Open Sans Bold Italic"), url("./github/700i.woff") format("woff"); }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 20px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
body > :first-child { margin-top: 0px !important; }
body > :last-child { margin-bottom: 0px !important; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 4px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border-width: 0px 0px 1px; border-style: none none solid; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; overflow: hidden; box-sizing: content-box; border-bottom-color: rgb(221, 221, 221); }
body > h2:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child + h2 { margin-top: 0px; padding-top: 0px; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0px; padding-top: 0px; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0px; padding-top: 0px; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0px; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
#write { overflow-x: auto; }
table tr { border-top: 1px solid rgb(204, 204, 204); background-color: white; margin: 0px; padding: 0px; }
table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border: 1px solid rgb(204, 204, 204); text-align: left; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(204, 204, 204); text-align: left; margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); }
.md-fences, code, tt { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding: 8px 1em 6px; }
.task-list { padding-left: 0px; }
.task-list-item { padding-left: 32px; }
.task-list-item input { top: 3px; left: 8px; }
@media screen and (min-width: 914px) { 
}
@media print { 
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { word-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; color: inherit; }
.md-tag { color: inherit; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
#md-notification::before { top: 10px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.117647); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }






</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-node'><p><strong></strong><font size=7 color=blue><center>君海独代SDK客户端开发指导文档</center></font></p><p><font size=4 color=blue><center>修改日志</center></font></p><table><thead><tr><th style='text-align:center;' >版本</th><th style='text-align:left;' >日期</th><th style='text-align:left;' >说明</th><th>修改人</th></tr></thead><tbody><tr><td style='text-align:center;' >1.1.11.10</td><td style='text-align:left;' >2014.11.10</td><td style='text-align:left;' >添加退出有无界面判断</td><td>Android开发组</td></tr><tr><td style='text-align:center;' >1.1.11.11</td><td style='text-align:left;' >2014.11.17</td><td style='text-align:left;' >登录返回json更新</td><td>Android开发组</td></tr><tr><td style='text-align:center;' >1.0.2.0</td><td style='text-align:left;' >2015.02.12</td><td style='text-align:left;' >更正logout, exit 逻辑错误</td><td>郑建辉</td></tr><tr><td style='text-align:center;' >1.0.2.0</td><td style='text-align:left;' >2015.02.15</td><td style='text-align:left;' >完善玩家数据接口</td><td>郑建辉</td></tr><tr><td style='text-align:center;' >1.0.2.0</td><td style='text-align:left;' >2015.02.27</td><td style='text-align:left;' >更正闪屏启动说明</td><td>郑建辉</td></tr><tr><td style='text-align:center;' >1.0.2.0</td><td style='text-align:left;' >2015.02.28</td><td style='text-align:left;' >更新uploadUserData</td><td>郑建辉</td></tr><tr><td style='text-align:center;' >1.0.2.1</td><td style='text-align:left;' >2015.03.03</td><td style='text-align:left;' >增加xxwan渠道的onStart,openUserCenter,onNewIntent</td><td>郑建辉</td></tr><tr><td style='text-align:center;' >1.0.2.1</td><td style='text-align:left;' >2015.03.04</td><td style='text-align:left;' >添加渠道特殊要求</td><td>郑建辉</td></tr><tr><td style='text-align:center;' >1.0.2.1</td><td style='text-align:left;' >2015.07.02</td><td style='text-align:left;' >修改文档的错误</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >1.0.2.2</td><td style='text-align:left;' >2015.07.08</td><td style='text-align:left;' >优化文档结构</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >1.0.2.3</td><td style='text-align:left;' >2015.07.15</td><td style='text-align:left;' >添加联运说明内容</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >1.0.2.4</td><td style='text-align:left;' >2015.12.11</td><td style='text-align:left;' >增加自定义应用宝登录接口</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >1.0.2.5</td><td style='text-align:left;' >2016.01.08</td><td style='text-align:left;' >新增激活码接口</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >1.1</td><td style='text-align:left;' >2016.02.02</td><td style='text-align:left;' >修复已知bug</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >2.0</td><td style='text-align:left;' >2016.04.07</td><td style='text-align:left;' >优化SDK功能</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >2.1</td><td style='text-align:left;' >2016.05.11</td><td style='text-align:left;' >添加数据上传参数</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >2.2</td><td style='text-align:left;' >2016.06.16</td><td style='text-align:left;' >废除getChannelID接口(老游戏可以继续使用)<br>新增getGameChannelId接口(新游戏使用)<br>添加游戏内购买道具统计数据接口</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >2.3</td><td style='text-align:left;' >2016.06.22</td><td style='text-align:left;' >优化内部逻辑，恢复getChannelID接口</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >2.4</td><td style='text-align:left;' >2017.02.17</td><td style='text-align:left;' >文档再次优化，内部逻辑优化</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >2.5</td><td style='text-align:left;' >2017.05.10</td><td style='text-align:left;' >清单文件增加meta参数：JH_NODE</td><td>黄伟杰</td></tr><tr><td style='text-align:center;' >2.6</td><td style='text-align:left;' >2017.12.04</td><td style='text-align:left;' >增加用户中心接口</td><td>黄伟杰</td></tr></tbody></table><p></p><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="c123"><a class="md-toc-inner" href="#header-c123">1 概述</a></span><span class="md-toc-item md-toc-h2" data-ref="c126"><a class="md-toc-inner" href="#header-c126">1.1 SDK包结构</a></span><span class="md-toc-item md-toc-h2" data-ref="c137"><a class="md-toc-inner" href="#header-c137">1.2 关于参数</a></span><span class="md-toc-item md-toc-h1" data-ref="c140"><a class="md-toc-inner" href="#header-c140">2 集成步骤</a></span><span class="md-toc-item md-toc-h2" data-ref="c141"><a class="md-toc-inner" href="#header-c141">2.1 导入jar包</a></span><span class="md-toc-item md-toc-h2" data-ref="c145"><a class="md-toc-inner" href="#header-c145">2.2 导入res资源和assets资源</a></span><span class="md-toc-item md-toc-h2" data-ref="c150"><a class="md-toc-inner" href="#header-c150">2.3 清单配置</a></span><span class="md-toc-item md-toc-h3" data-ref="c151"><a class="md-toc-inner" href="#header-c151">2.2.1 权限</a></span><span class="md-toc-item md-toc-h3" data-ref="c153"><a class="md-toc-inner" href="#header-c153">2.2.2 Application配置</a></span><span class="md-toc-item md-toc-h3" data-ref="c162"><a class="md-toc-inner" href="#header-c162">2.2.3 META-DATA配置</a></span><span class="md-toc-item md-toc-h3" data-ref="c164"><a class="md-toc-inner" href="#header-c164">2.2.4 权限配置</a></span><span class="md-toc-item md-toc-h3" data-ref="c166"><a class="md-toc-inner" href="#header-c166">2.2.5 Activity配置</a></span><span class="md-toc-item md-toc-h1" data-ref="c170"><a class="md-toc-inner" href="#header-c170">3 接口集成</a></span><span class="md-toc-item md-toc-h2" data-ref="c171"><a class="md-toc-inner" href="#header-c171">3.1 ChannelInterface类</a></span><span class="md-toc-item md-toc-h2" data-ref="c176"><a class="md-toc-inner" href="#header-c176">3.2 生命周期方法（必接）</a></span><span class="md-toc-item md-toc-h2" data-ref="c178"><a class="md-toc-inner" href="#header-c178">3.3 初始化接口（必接）</a></span><span class="md-toc-item md-toc-h3" data-ref="c179"><a class="md-toc-inner" href="#header-c179">3.3.1 接口定义</a></span><span class="md-toc-item md-toc-h3" data-ref="c181"><a class="md-toc-inner" href="#header-c181">3.3.2 示例</a></span><span class="md-toc-item md-toc-h2" data-ref="c183"><a class="md-toc-inner" href="#header-c183">3.4 登录接口（必接）</a></span><span class="md-toc-item md-toc-h3" data-ref="c184"><a class="md-toc-inner" href="#header-c184">3.4.1 接口定义</a></span><span class="md-toc-item md-toc-h3" data-ref="c186"><a class="md-toc-inner" href="#header-c186">3.4.2 君海登录流程图</a></span><span class="md-toc-item md-toc-h3" data-ref="c191"><a class="md-toc-inner" href="#header-c191">3.4.3 示例</a></span><span class="md-toc-item md-toc-h3" data-ref="c193"><a class="md-toc-inner" href="#header-c193">3.4.4 关于channelId和gameChannelid的特别说明</a></span><span class="md-toc-item md-toc-h2" data-ref="c200"><a class="md-toc-inner" href="#header-c200">3.5 服务器登录校验数据回传接口（必接）</a></span><span class="md-toc-item md-toc-h3" data-ref="c201"><a class="md-toc-inner" href="#header-c201">3.5.1 接口定义</a></span><span class="md-toc-item md-toc-h3" data-ref="c203"><a class="md-toc-inner" href="#header-c203">3.5.2 调用时机</a></span><span class="md-toc-item md-toc-h2" data-ref="c206"><a class="md-toc-inner" href="#header-c206">3.6 角色信息上报接口（必接）</a></span><span class="md-toc-item md-toc-h3" data-ref="c207"><a class="md-toc-inner" href="#header-c207">3.6.1 接口定义</a></span><span class="md-toc-item md-toc-h3" data-ref="c209"><a class="md-toc-inner" href="#header-c209">3.6.2 示例</a></span><span class="md-toc-item md-toc-h2" data-ref="c211"><a class="md-toc-inner" href="#header-c211">3.7 登出接口（必接）</a></span><span class="md-toc-item md-toc-h3" data-ref="c212"><a class="md-toc-inner" href="#header-c212">3.7.1 接口定义</a></span><span class="md-toc-item md-toc-h3" data-ref="c214"><a class="md-toc-inner" href="#header-c214">3.7.2 示例</a></span><span class="md-toc-item md-toc-h2" data-ref="c216"><a class="md-toc-inner" href="#header-c216">3.8 支付接口（必接）</a></span><span class="md-toc-item md-toc-h3" data-ref="c217"><a class="md-toc-inner" href="#header-c217">3.8.1 接口定义</a></span><span class="md-toc-item md-toc-h3" data-ref="c219"><a class="md-toc-inner" href="#header-c219">3.8.2 君海支付流程图</a></span><span class="md-toc-item md-toc-h3" data-ref="c222"><a class="md-toc-inner" href="#header-c222">3.8.3 示例</a></span><span class="md-toc-item md-toc-h2" data-ref="c224"><a class="md-toc-inner" href="#header-c224">3.9 退出游戏接口（必接）</a></span><span class="md-toc-item md-toc-h3" data-ref="c225"><a class="md-toc-inner" href="#header-c225">3.9.1 接口定义</a></span><span class="md-toc-item md-toc-h3" data-ref="c227"><a class="md-toc-inner" href="#header-c227">3.9.2 示例</a></span><span class="md-toc-item md-toc-h2" data-ref="c229"><a class="md-toc-inner" href="#header-c229">3.10 游戏内购买道具统计数据接口（非常重要，必接）</a></span><span class="md-toc-item md-toc-h3" data-ref="c230"><a class="md-toc-inner" href="#header-c230">3.10.1 接口定义</a></span><span class="md-toc-item md-toc-h3" data-ref="c232"><a class="md-toc-inner" href="#header-c232">3.10.2 示例</a></span><span class="md-toc-item md-toc-h2" data-ref="c234"><a class="md-toc-inner" href="#header-c234">3.11 用户中心或论坛接口（选接，有特殊要求才接入，一般可不接入）</a></span><span class="md-toc-item md-toc-h3" data-ref="c235"><a class="md-toc-inner" href="#header-c235">3.11.1 接口定义</a></span><span class="md-toc-item md-toc-h3" data-ref="c238"><a class="md-toc-inner" href="#header-c238">3.11.2 示例</a></span><span class="md-toc-item md-toc-h1" data-ref="c240"><a class="md-toc-inner" href="#header-c240">4 其他注意事项</a></span></p></div><h1><a name='header-c123' class='md-header-anchor '></a>1 概述</h1><p>​	君海独代SDK为游戏开发者在游戏APP和渠道SDK之间提供了一道桥梁，开发者只需要一次接入君海独代SDK，就可以免去接入渠道SDK各种繁琐事务，让开发者的精力集中在游戏开发上。</p><h2><a name='header-c126' class='md-header-anchor '></a>1.1 SDK包结构</h2><p>​	doc：包含了客户端文档，服务器文档和快速升级说明文档。</p><p>​	demo：提供了SDK的demo工程。工程使用的集成工具为<a href='https://developer.android.com/develop/index.html'>Android Studio</a>。</p><p>​	sdk：为SDK集成所需要的所有相关资源，请开发者从该目录下拷贝相应的资源至游戏工程相关目录。</p><p>​	<font size=5 color=red>强烈建议接入过程所有配置，所有接口，都按照本文档说明来操作。本文档已经提供了详细的说明。</font></p><p>​	<a href='#header-c240'>其他注意事项</a></p><h2><a name='header-c137' class='md-header-anchor '></a>1.2 关于参数</h2><p>​	SDK接入所需要的参数，我方在对接前期会将参数文本发至对应的技术对接组，如未拿到相关参数，请联系技术对接组内的<font color=red>相关商务对接人</font>。</p><h1><a name='header-c140' class='md-header-anchor '></a>2 集成步骤</h1><h2><a name='header-c141' class='md-header-anchor '></a>2.1 导入jar包</h2><p>​	将sdk/libs目录下的jar包拷贝至游戏工程中。Android Studio工程放置jar的位置为某个module下的libs目录。同时在对应的module目录下的build.gradle配置上。</p><pre class="md-fences md-end-block" lang="gradle"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure">AخA</div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;">compile fileTree(include: ['*.jar'], dir: 'libs')</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h2><a name='header-c145' class='md-header-anchor '></a>2.2 导入res资源和assets资源</h2><p>​	将sdk/res目录下的资源拷贝至游戏工程中。Android Studio工程放置资源文件的位置为某个module下的src/main/res目录。</p><p>​	将sdk/assets目录下的资源拷贝至游戏工程中。Android Studio工程放置资源文件的位置为某个module下的src/main/assets目录。</p><h2><a name='header-c150' class='md-header-anchor '></a>2.3 清单配置</h2><h3><a name='header-c151' class='md-header-anchor '></a>2.2.1 权限</h3><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.INTERNET"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.ACCESS_NETWORK_STATE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.READ_EXTERNAL_STORAGE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.READ_PHONE_STATE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.ACCESS_WIFI_STATE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.SYSTEM_ALERT_WINDOW"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.GET_TASKS"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.ACCESS_COARSE_LOCATION"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.SYSTEM_OVERLAY_WINDOW"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><h3><a name='header-c153' class='md-header-anchor '></a>2.2.2 Application配置</h3><p>​	1.游戏如果<font color=red>有自定义的Application</font>，那么请<font color=red>务必继承prj.chameleon.channelapi.ChameleonApplication类</font>。并且重写以下两个方法：</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">@Override</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">protected</span> <span class="cm-variable-3">void</span> <span class="cm-def">attachBaseContext</span>(<span class="cm-variable">Context</span> <span class="cm-variable">base</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">super</span>.<span class="cm-variable">attachBaseContext</span>(<span class="cm-variable">base</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">onCreate</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">super</span>.<span class="cm-variable">onCreate</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><p></p><p>​	2.如果游戏<font color=red>没有自定义的Application</font>，那么请按照如下要求在Manifest中的application节点配置上：</p><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">application</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-attribute">android:name</span>=<span class="cm-string">"prj.chameleon.channelapi.ChameleonApplication"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3><a name='header-c162' class='md-header-anchor '></a>2.2.3 META-DATA配置</h3><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--meta-data需要放在application节点中--&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"GAME_ID"</span> <span class="cm-attribute">android:value</span>=<span class="cm-string">"由君海提供的GAME_ID"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"PAY_SIGN"</span> <span class="cm-attribute">android:value</span>=<span class="cm-string">"由君海提供的PAY_SIGN"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"JH_APPID"</span> <span class="cm-attribute">android:value</span>=<span class="cm-string">"由君海提供的JH_APPID"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"JH_APPKEY"</span> <span class="cm-attribute">android:value</span>=<span class="cm-string">"由君海提供的JH_APPKEY"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"JH_GAME_CHANNEL_ID"</span> <span class="cm-attribute">android:value</span>=<span class="cm-string">"由君海提供的JH_GAME_CHANNEL_ID"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"JH_NODE"</span> <span class="cm-attribute">android:value</span>=<span class="cm-string">"由君海提供的JH_NODE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--下边这些配置，请直接拷贝，无需修改value--&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"JUNHAI Channel"</span> <span class="cm-attribute">android:value</span>=<span class="cm-string">"junhai_test"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"JUNHAI_DEBUG"</span> <span class="cm-attribute">android:value</span>=<span class="cm-string">"true"</span><span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"JH_CHANNEL_ID"</span> <span class="cm-attribute">android:value</span>=<span class="cm-string">"18"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><h3><a name='header-c164' class='md-header-anchor '></a>2.2.4 权限配置</h3><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.INTERNET"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.ACCESS_NETWORK_STATE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.READ_EXTERNAL_STORAGE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.READ_PHONE_STATE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.ACCESS_WIFI_STATE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.SYSTEM_ALERT_WINDOW"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.GET_TASKS"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.ACCESS_COARSE_LOCATION"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.SYSTEM_OVERLAY_WINDOW"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><h3><a name='header-c166' class='md-header-anchor '></a>2.2.5 Activity配置</h3><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-comment">&lt;!-- 程序的启动Activity，在执行完闪屏之后，君海SDK会根据所配置的游戏主Activity进行跳转。闪屏Activity是君海SDK二次打包更换渠道闪屏的根本实现所在，请务必按照要求配置。--&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:name</span>=<span class="cm-string">"prj.chameleon.channelapi.SplashScreenActivity"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:configChanges</span>=<span class="cm-string">"fontScale|orientation|keyboardHidden|locale|navigation|screenSize|uiMode"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:launchMode</span>=<span class="cm-string">"standard"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:noHistory</span>=<span class="cm-string">"true"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:screenOrientation</span>=<span class="cm-string">"portrait"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:stateNotNeeded</span>=<span class="cm-string">"true"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:theme</span>=<span class="cm-string">"@android:style/Theme.NoTitleBar.Fullscreen"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-comment">&lt;!-- TODO: value 的值是游戏的主 Activity, 必须是完整的路径.如果这里配置的Activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">不是游戏的主Activity，那么必须在这个Activiy中调用SDK的onCreate和onReusme接口--&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta-data</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:name</span>=<span class="cm-string">"prj.chameleon.intent.main"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:value</span>=<span class="cm-string">"com.junhai.agent.demo.MainActivity"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">intent-filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">action</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.intent.action.MAIN"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-comment">&lt;!-- LAUNCHER 只能有一个。 游戏的主Activity不需要添加LAUNCHER, 否则会在应用列表看到两个启动icon--&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">category</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.intent.category.LAUNCHER"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">intent-filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">activity</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:name</span>=<span class="cm-string">"com.ijunhai.sdk.union.ui.ActivityContainer"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:configChanges</span>=<span class="cm-string">"fontScale|orientation|keyboardHidden|locale|navigation|screenSize|uiMode"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:screenOrientation</span>=<span class="cm-string">"portrait"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:theme</span>=<span class="cm-string">"@style/jh_activity_container"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:name</span>=<span class="cm-string">"com.ijunhai.sdk.union.ui.webview.WebViewActivity"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:configChanges</span>=<span class="cm-string">"fontScale|orientation|keyboardHidden|locale|navigation|screenSize|uiMode"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:launchMode</span>=<span class="cm-string">"singleInstance"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:screenOrientation</span>=<span class="cm-string">"portrait"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:theme</span>=<span class="cm-string">"@android:style/Theme.Holo.NoActionBar"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:name</span>=<span class="cm-string">"com.alipay.sdk.app.H5PayActivity"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:configChanges</span>=<span class="cm-string">"orientation|keyboardHidden|navigation"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:exported</span>=<span class="cm-string">"false"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:screenOrientation</span>=<span class="cm-string">"behind"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:name</span>=<span class="cm-string">"com.alipay.sdk.auth.AuthActivity"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:configChanges</span>=<span class="cm-string">"orientation|keyboardHidden|navigation"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:exported</span>=<span class="cm-string">"false"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:screenOrientation</span>=<span class="cm-string">"behind"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-comment">&lt;!--请不要修改QQWapPayWebView的android:screenOrientation属性值--&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:name</span>=<span class="cm-string">"com.switfpass.pay.activity.QQWapPayWebView"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:screenOrientation</span>=<span class="cm-string">"sensorPortrait"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">receiver</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:name</span>=<span class="cm-string">"prj.chameleon.channelapi.DownloadCompleteBroadcastReceiver"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-attribute">android:exported</span>=<span class="cm-string">"true"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">intent-filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">action</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.intent.action.PACKAGE_ADDED"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">data</span> <span class="cm-attribute">android:scheme</span>=<span class="cm-string">"package"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">intent-filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">intent-filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">action</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.intent.action.DOWNLOAD_COMPLETE"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">intent-filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">receiver</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1403px;"></div></div></div></pre><p></p><h1><a name='header-c170' class='md-header-anchor '></a>3 接口集成</h1><h2><a name='header-c171' class='md-header-anchor '></a>3.1 ChannelInterface类</h2><p>​	SDK所有对外接口都定义在该类中，<font color=red>且所有对外接口都为静态方法，可以通过ChannelInterface.xxx进行调用。</font></p><p>​	<font color=red>除了<a href='#header-c176'>生命周期接口</a>，<a href='#header-c224'>退出接口</a>外，其他接口，务必在收到初始化成功回调后，才可调用。</font></p><h2><a name='header-c176' class='md-header-anchor '></a>3.2 生命周期方法（必接）</h2><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">onCreate</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>);</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">onReusme</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">onPause</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">onStop</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">onRestart</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">onDestroy</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">onStart</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">onNewIntent</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>, <span class="cm-variable">Intent</span> <span class="cm-variable">intent</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">onActivityResult</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">requestCode</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">resultCode</span>, <span class="cm-variable">Intent</span> <span class="cm-variable">data</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">onWindowFocusChanged</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>, <span class="cm-variable-3">boolean</span> <span class="cm-variable">hasFocus</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><h2><a name='header-c178' class='md-header-anchor '></a>3.3 初始化接口（必接）</h2><h3><a name='header-c179' class='md-header-anchor '></a>3.3.1 接口定义</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* 初始化接口</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param activity 游戏的主activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param isDebug 直接传true即可</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param cb 回调类,必传</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">init</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>, <span class="cm-variable-3">boolean</span> <span class="cm-variable">isDebug</span>, <span class="cm-variable">IDispatcherCb</span> <span class="cm-variable">cb</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h3><a name='header-c181' class='md-header-anchor '></a>3.3.2 示例</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// 强烈建议尽可能提早调用初始化接口，并且在收到初始化成功回调后，才可以进入游戏。</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// 因为有些渠道要求他们闪屏必须最先调起，而渠道初始化完成之后才会调起闪屏页面。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">init</span>(<span class="cm-keyword">this</span>, <span class="cm-atom">true</span>, <span class="cm-keyword">new</span> <span class="cm-variable">IDispatcherCb</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onFinished</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">code</span>, <span class="cm-variable">JSONObject</span> <span class="cm-variable">jsonObject</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span> (<span class="cm-variable">Constants</span>.<span class="cm-variable">ErrorCode</span>.<span class="cm-variable">ERR_OK</span> <span class="cm-operator">==</span> <span class="cm-variable">code</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">// 初始化成功,游戏可以进行其他逻辑操作,如调用SDK的login接口进行登录。 &nbsp;  </span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">// 初始化失败,强烈建议游戏在收到初始化失败回调后,给一个初始化失败的对话框,并且退出游戏。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre><pre class=""><span style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 276px;"></div></div></div></pre><h2><a name='header-c183' class='md-header-anchor '></a>3.4 登录接口（必接）</h2><h3><a name='header-c184' class='md-header-anchor '></a>3.4.1 接口定义</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* 登录接口</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param activity 游戏主activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param cb 回调</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param accountActionListener 帐号切换监听</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">login</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>, <span class="cm-variable">IDispatcherCb</span> <span class="cm-variable">cb</span>, <span class="cm-variable">IAccountActionListener</span> <span class="cm-variable">accountActionListener</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><h3><a name='header-c186' class='md-header-anchor '></a>3.4.2 君海登录流程图</h3><p>​	<font color=red>请 CP接入 SDK 时严格按照流程图走，即使有时候某个流程看上去是多余的，但其实都是必须的！</font></p><p><img src='http://support.ijunhai.com/Public/img/cloud/cloud_20170217142656.jpg' alt='' /></p><h3><a name='header-c191' class='md-header-anchor '></a>3.4.3 示例</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">login</span>(<span class="cm-keyword">this</span>, <span class="cm-keyword">new</span> <span class="cm-variable">IDispatcherCb</span>() {</span></pre></div><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onFinished</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">code</span>, <span class="cm-variable">JSONObject</span> <span class="cm-variable">jsonObject</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span> (<span class="cm-variable">code</span> <span class="cm-operator">==</span> <span class="cm-variable">Constants</span>.<span class="cm-variable">ErrorCode</span>.<span class="cm-variable">ERR_OK</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">// 登录成功，进行服务器登录信息校验</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-keyword">try</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">RequestParams</span> <span class="cm-variable">req</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">RequestParams</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">req</span>.<span class="cm-variable">put</span>(<span class="cm-string">"uid"</span>, (<span class="cm-variable-3">String</span>) <span class="cm-variable">jsonObject</span>.<span class="cm-variable">get</span>(<span class="cm-string">"uid"</span>));</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">req</span>.<span class="cm-variable">put</span>(<span class="cm-string">"user_name"</span>, (<span class="cm-variable-3">String</span>) <span class="cm-variable">jsonObject</span>.<span class="cm-variable">get</span>(<span class="cm-string">"user_name"</span>));</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">req</span>.<span class="cm-variable">put</span>(<span class="cm-string">"session_id"</span>, (<span class="cm-variable-3">String</span>) <span class="cm-variable">jsonObject</span>.<span class="cm-variable">get</span>(<span class="cm-string">"session_id"</span>));</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">req</span>.<span class="cm-variable">put</span>(<span class="cm-string">"channel_id"</span>, <span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">getChannelID</span>());</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">req</span>.<span class="cm-variable">put</span>(<span class="cm-string">"game_channel_id"</span>, <span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">getGameChannelId</span>());</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">req</span>.<span class="cm-variable">put</span>(<span class="cm-string">"game_id"</span>, <span class="cm-variable">SdkInfo</span>.<span class="cm-variable">getInstance</span>().<span class="cm-variable">getGameId</span>());</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">req</span>.<span class="cm-variable">put</span>(<span class="cm-string">"others"</span>, (<span class="cm-variable-3">String</span>) <span class="cm-variable">jsonObject</span>.<span class="cm-variable">get</span>(<span class="cm-string">"others"</span>));</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable-3">String</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>; <span class="cm-comment">// 这里的url,为游戏研发服务器地址,用于登录信息校验.</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">new</span> <span class="cm-variable">AsyncHttpClient</span>().<span class="cm-variable">get</span>(<span class="cm-variable">url</span>, <span class="cm-variable">req</span>, <span class="cm-keyword">new</span> <span class="cm-variable">JsonHttpResponseHandler</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onSuccess</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">statusCode</span>, <span class="cm-variable">Header</span>[] <span class="cm-variable">headers</span>, <span class="cm-variable">JSONObject</span> <span class="cm-variable">response</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-tab">   </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-comment">// 游戏需要根据实际情况拼接 JSON 字符串</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-comment">/*</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">{</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">"code": 0, // code为0时表示成功，非0表示失败</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">"loginInfo": {</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">"uid": "123456", // 这个uid是服务端返回的uid，不是SDK登录回调的uid</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">"token": "xxxaaaa" // 这个token是服务端返回的token，不是SDK登录回调的token</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">}</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">}</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-comment">//请务必在服务器登录验证成功后,调用该接口,该接口接收的参数,如上所示。这个接口没有正确调用，支付必然失败。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">onLoginRsp</span>(<span class="cm-variable">response</span>.<span class="cm-variable">toString</span>());</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onFailure</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">statusCode</span>, <span class="cm-variable">Header</span>[] <span class="cm-variable">headers</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">responseBody</span>, <span class="cm-variable">Throwable</span> <span class="cm-variable">e</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  });</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  } <span class="cm-keyword">catch</span> (<span class="cm-variable">Exception</span> <span class="cm-variable">e</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">// @TODO 登录失败，游戏根据自己的逻辑处理，或是重新登录，或是退出游戏之类</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}, <span class="cm-keyword">new</span> <span class="cm-variable">AccountActionListener</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onAccountLogout</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//@TODO 游戏收到登出回调后,需要退到游戏登录界面,让玩家重新登录游戏.</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre><pre class=""><span style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1219px;"></div></div></div></pre><h3><a name='header-c193' class='md-header-anchor '></a>3.4.4 关于channelId和gameChannelid的特别说明</h3><p>​	channelId,是指渠道id,渠道的唯一标。比如，百度渠道 id是2，同一个游戏，无论出多少个百度分包，channel_id永远是2。该值通过<font color=red>ChannelInterface.getChannelID()</font>接口获取。</p><p>​	gameChannelid，是指渠道包 id，是标识一个渠道包的唯一标识。比如，百度1包是1000，百度2包是 10001。该值通过<font color=red>ChannelInterface.getGameChannelId()</font>接口获取。一般情况下，该值可以作为单个游戏包开服的唯一标识。我们也强烈建议这么做。</p><p></p><h2><a name='header-c200' class='md-header-anchor '></a>3.5 服务器登录校验数据回传接口（必接）</h2><h3><a name='header-c201' class='md-header-anchor '></a>3.5.1 接口定义</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* 服务器登录校验数据回传接口</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* </span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param rsp json格式:</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  {</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  "code": 0, // code为0表示成功，非0表述失败</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  "loginInfo": {</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  "uid": "123456", // 这个uid是服务端返回的uid，不是SDK登录回调的uid</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  "token": "xxxaaaa" // 这个token是服务端返回的token，不是SDK登录回调的token</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @return 返回值可以忽略</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">boolean</span> <span class="cm-def">onLoginRsp</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">rsp</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 322px;"></div></div></div></pre><h3><a name='header-c203' class='md-header-anchor '></a>3.5.2 调用时机</h3><p>​	<font color=red>请务必在服务器登录检验成功后调用该接口，<a href='#header-c191'>详情</a>。</font></p><h2><a name='header-c206' class='md-header-anchor '></a>3.6 角色信息上报接口（必接）</h2><h3><a name='header-c207' class='md-header-anchor '></a>3.6.1 接口定义</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* 角色信息上报接口</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* 调用时机:进入服务器的时候, 玩家创建用户角色的时候和角色升级的时候</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param activity 游戏主activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param params 相关参数,详情情况示例代码</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">uploadUserData</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>, <span class="cm-variable">HashMap</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable-3">Object</span><span class="cm-operator">&gt;</span> <span class="cm-variable">params</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h3><a name='header-c209' class='md-header-anchor '></a>3.6.2 示例</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">HashMap</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable-3">Object</span><span class="cm-operator">&gt;</span> <span class="cm-variable">params</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashMap</span><span class="cm-operator">&lt;&gt;</span>();</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// Constants.User.ENTER_SERVER为进入服务器</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ACTION</span>, <span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ENTER_SERVER</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">SERVER_ID</span>, <span class="cm-string">"1"</span>); <span class="cm-comment">// 区服id</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">SERVER_NAME</span>, <span class="cm-string">"s1"</span>); <span class="cm-comment">// 区服名字</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ROLE_ID</span>, <span class="cm-string">"100"</span>); <span class="cm-comment">// 角色id</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ROLE_NAME</span>, <span class="cm-string">"小海"</span>); <span class="cm-comment">// 角色名</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ROLE_LEVEL</span>, <span class="cm-number">10</span>); <span class="cm-comment">// 角色等级</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">VIP_LEVEL</span>, <span class="cm-number">5</span>); <span class="cm-comment">// VIP 等级</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">BALANCE</span>, <span class="cm-number">100</span>); <span class="cm-comment">// 玩家游戏币总额， 如 100 金币</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">PARTY_NAME</span>, <span class="cm-string">"小海公会"</span>); <span class="cm-comment">// 帮派，公会名称。 若无，填 unknown</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// ROLE_CREATE_TIME参数必传，不然uc审核不通过</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// 此字段为角色创建(CREATE_ROLE)的时间,(单位：秒 即10位数)，必须传服务器时间。ENTER_SERVER和UPDATE_LEVEL时如果有角色，必须传入真实时间，没有的话，传入-1</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ROLE_CREATE_TIME</span>, <span class="cm-variable">TimeUtil</span>.<span class="cm-variable">unixTime</span>());</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// 此字段为角色升级(UPDATE_LEVEL)的时间，(单位：秒 即10位数)，必须传服务器时间。ENTER_SERVER和CREATE_ROLE时如果有角色，必须传入最新一次角色升级的真实时间，没有的话，传入角色创建时间，或是-1</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ROLE_UPDATE_TIME</span>, <span class="cm-variable">TimeUtil</span>.<span class="cm-variable">unixTime</span>());</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">uploadUserData</span>(<span class="cm-keyword">this</span>, <span class="cm-variable">params</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// Constants.User.CREATE_ROLE为角色创建</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ACTION</span>, <span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">CREATE_ROLE</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">uploadUserData</span>(<span class="cm-keyword">this</span>, <span class="cm-variable">params</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// Constants.User.UPDATE_LEVEL为角色升级</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ACTION</span>, <span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">UPDATE_LEVEL</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">uploadUserData</span>(<span class="cm-keyword">this</span>, <span class="cm-variable">params</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 621px;"></div></div></div></pre><h2><a name='header-c211' class='md-header-anchor '></a>3.7 登出接口（必接）</h2><h3><a name='header-c212' class='md-header-anchor '></a>3.7.1 接口定义</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* 帐号登出接口。在游戏内如有退出登录之类的按钮，可以调用该接口进行登出。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">*</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param activity 游戏的主activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param cb &nbsp; &nbsp; &nbsp; 回调类</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">logout</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>, <span class="cm-variable">IDispatcherCb</span> <span class="cm-variable">cb</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h3><a name='header-c214' class='md-header-anchor '></a>3.7.2 示例</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">logout</span>(<span class="cm-keyword">this</span>, <span class="cm-keyword">new</span> <span class="cm-variable">IDispatcherCb</span>() {</span></pre></div><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onFinished</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">code</span>, <span class="cm-variable">JSONObject</span> <span class="cm-variable">jsonObject</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span> (<span class="cm-variable">Constants</span>.<span class="cm-variable">ErrorCode</span>.<span class="cm-variable">LOGOUT_SUCCESS</span> <span class="cm-operator">==</span> <span class="cm-variable">code</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">// 帐号登出成功,游戏需要回到登录主界面,让玩家重新登录帐号</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">// 帐号登出失败,玩家可以继续游戏</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre><pre class=""><span style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><h2><a name='header-c216' class='md-header-anchor '></a>3.8 支付接口（必接）</h2><h3><a name='header-c217' class='md-header-anchor '></a>3.8.1 接口定义</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">/**</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* 购买游戏币接口，注意，支付结果请以服务器回调通知为准。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param activity &nbsp; &nbsp; 调起支付的Activity，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param orderId &nbsp; &nbsp;  订单号，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param roleUid &nbsp; &nbsp;  玩家角色id，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param roleName &nbsp; &nbsp; 玩家角色名，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param serverId &nbsp; &nbsp; 区服id，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param productName  商品名，商品名称前请不要添加任何量词。如钻石，月卡即可。必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param productID &nbsp;  商品ID，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param payInfo &nbsp; &nbsp;  商品描述信息，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param productCount 购买的商品数量，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param realPayMoney 支付金额，单位为分，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param notifyUrl &nbsp;  支付结果回调地址，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param cb &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 回调类，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">buy</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">orderId</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">roleUid</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">roleName</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">serverId</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">productName</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">productID</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">payInfo</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">productCount</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">realPayMoney</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">notifyUrl</span>, <span class="cm-variable">IDispatcherCb</span> <span class="cm-variable">cb</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 437px;"></div></div></div></pre><h3><a name='header-c219' class='md-header-anchor '></a>3.8.2 君海支付流程图</h3><p><img src='http://support.ijunhai.com/Public/img/cloud/cloud_20170217142632.jpg' alt='' /></p><h3><a name='header-c222' class='md-header-anchor '></a>3.8.3 示例</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">String</span> <span class="cm-variable">orderId</span> <span class="cm-operator">=</span> <span class="cm-string">"123"</span> <span class="cm-operator">+</span> <span class="cm-variable">TimeUtil</span>.<span class="cm-variable">unixTimeString</span>(); <span class="cm-comment">//订单号，必传。</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">String</span> <span class="cm-variable">roleID</span> <span class="cm-operator">=</span> <span class="cm-string">"123"</span>; <span class="cm-comment">//玩家角色id，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">String</span> <span class="cm-variable">roleName</span> <span class="cm-operator">=</span> <span class="cm-string">"test_user_name_in_game"</span>; <span class="cm-comment">//玩家角色名，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">String</span> <span class="cm-variable">serverId</span> <span class="cm-operator">=</span> <span class="cm-string">"1"</span>; <span class="cm-comment">//区服id，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">String</span> <span class="cm-variable">productName</span> <span class="cm-operator">=</span> <span class="cm-string">"钻石"</span>;  <span class="cm-comment">//商品名，商品名称前请不要添加任何量词。如钻石，月卡即可。必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">String</span> <span class="cm-variable">productID</span> <span class="cm-operator">=</span> <span class="cm-string">"test_product_id"</span>; <span class="cm-comment">//商品ID，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">String</span> <span class="cm-variable">payInfo</span> <span class="cm-operator">=</span> <span class="cm-string">"test pay info"</span>; <span class="cm-comment">//商品描述信息，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">productCount</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>; <span class="cm-comment">// 购买的商品数量，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">realPayMoney</span> <span class="cm-operator">=</span> <span class="cm-number">100</span>; <span class="cm-comment">//支付金额，单位为分，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">String</span> <span class="cm-variable">notifyUrl</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>; <span class="cm-comment">//支付结果回调地址，必传。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">buy</span>(<span class="cm-keyword">this</span>, <span class="cm-variable">orderId</span>, <span class="cm-variable">roleID</span>, <span class="cm-variable">roleName</span>, <span class="cm-variable">serverId</span>, <span class="cm-variable">productName</span>, <span class="cm-variable">productID</span>, <span class="cm-variable">payInfo</span>, <span class="cm-variable">productCount</span>, <span class="cm-variable">realPayMoney</span>, <span class="cm-variable">notifyUrl</span>, <span class="cm-keyword">new</span> <span class="cm-variable">IDispatcherCb</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onFinished</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">code</span>, <span class="cm-variable">JSONObject</span> <span class="cm-variable">jsonObject</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span> (<span class="cm-variable">Constants</span>.<span class="cm-variable">ErrorCode</span>.<span class="cm-variable">ERR_OK</span> <span class="cm-operator">==</span> <span class="cm-variable">code</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">// 游戏收到回调后, 不要去提示玩家支付成功之类的信息.因为有些渠道SDK还未支付成功,就给了成功支付回调.</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">// 游戏收到回调后, 不要去提示玩家支付失败之类的信息.因为有些渠道SDK还未支付成功,就给了失败支付回调.</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre><pre class=""><span style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 529px;"></div></div></div></pre><h2><a name='header-c224' class='md-header-anchor '></a>3.9 退出游戏接口（必接）</h2><h3><a name='header-c225' class='md-header-anchor '></a>3.9.1 接口定义</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* 退出游戏接口</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param activity 游戏的主activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param cb 回调类</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">exit</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>, <span class="cm-variable">IDispatcherCb</span> <span class="cm-variable">cb</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><h3><a name='header-c227' class='md-header-anchor '></a>3.9.2 示例</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">exit</span>(<span class="cm-keyword">this</span>, <span class="cm-keyword">new</span> <span class="cm-variable">IDispatcherCb</span>() {</span></pre></div><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onFinished</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">retCode</span>, <span class="cm-variable">JSONObject</span> <span class="cm-variable">data</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">switch</span> (<span class="cm-variable">retCode</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-keyword">case</span> <span class="cm-variable">Constants</span>.<span class="cm-variable">ErrorCode</span>.<span class="cm-variable">EXIT_NO_UI</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-comment">// 渠道无退出UI，游戏自行处理。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-comment">// 示例</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">final</span> <span class="cm-variable">AlertDialog</span>.<span class="cm-variable">Builder</span> <span class="cm-variable">builder</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">AlertDialog</span>.<span class="cm-variable">Builder</span>(<span class="cm-variable">DemoActivity</span>.<span class="cm-keyword">this</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">builder</span>.<span class="cm-variable">setPositiveButton</span>(<span class="cm-string">"继续游戏"</span>, <span class="cm-keyword">new</span> <span class="cm-variable">DialogInterface</span>.<span class="cm-variable">OnClickListener</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onClick</span>(<span class="cm-variable">DialogInterface</span> <span class="cm-variable">dialog</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">which</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">dialog</span>.<span class="cm-variable">dismiss</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }).<span class="cm-variable">setNegativeButton</span>(<span class="cm-string">"退出游戏"</span>, <span class="cm-keyword">new</span> <span class="cm-variable">DialogInterface</span>.<span class="cm-variable">OnClickListener</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onClick</span>(<span class="cm-variable">DialogInterface</span> <span class="cm-variable">dialog</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">which</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">dialog</span>.<span class="cm-variable">dismiss</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }).<span class="cm-variable">setMessage</span>(<span class="cm-string">"这是Demo测试的退出UI，游戏需要自行实现。确定要退出游戏吗?"</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">create</span>().<span class="cm-variable">show</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">break</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-keyword">case</span> <span class="cm-variable">Constants</span>.<span class="cm-variable">ErrorCode</span>.<span class="cm-variable">EXIT_WITH_UI</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">Log</span>.<span class="cm-variable">d</span>(<span class="cm-variable">TAG</span>, <span class="cm-string">"channel has exit ui"</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">result</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span>.<span class="cm-variable">optInt</span>(<span class="cm-string">"content"</span>, <span class="cm-variable">Constants</span>.<span class="cm-variable">ErrorCode</span>.<span class="cm-variable">CONTINUE_GAME</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">if</span> (<span class="cm-variable">result</span> <span class="cm-operator">==</span> <span class="cm-variable">Constants</span>.<span class="cm-variable">ErrorCode</span>.<span class="cm-variable">CONTINUE_GAME</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-comment">// 继续游戏, 这里游戏可以无需做任何逻辑处理。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-comment">// 退出游戏, 游戏需要做退出程序逻辑。</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">finish</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">break</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre><pre class=""><span style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 782px;"></div></div></div></pre><h2><a name='header-c229' class='md-header-anchor '></a>3.10 游戏内购买道具统计数据接口（非常重要，必接）</h2><h3><a name='header-c230' class='md-header-anchor '></a>3.10.1 接口定义</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* 游戏内购买道具统计数据接口</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* 调用时机:玩家使用游戏币购买游戏内道具的时候</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param activity 游戏主activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">* @param params 相关参数,详情请看示例代码</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">uploadUserData</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>, <span class="cm-variable">HashMap</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable-3">Object</span><span class="cm-operator">&gt;</span> <span class="cm-variable">params</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h3><a name='header-c232' class='md-header-anchor '></a>3.10.2 示例</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// 游戏内购买道具统计数据接口</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">HashMap</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable-3">Object</span><span class="cm-operator">&gt;</span> <span class="cm-variable">params</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashMap</span><span class="cm-operator">&lt;&gt;</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ACTION</span>, <span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">BUY_ITEM</span>); <span class="cm-comment">// 事件名称</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">CONSUME_COIN</span>, <span class="cm-number">100</span>);<span class="cm-comment">// 购买道具所花费的游戏币</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">CONSUME_BIND_COIN</span>, <span class="cm-number">0</span>);<span class="cm-comment">// 购买道具所花费的绑定游戏币</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">REMAIN_COIN</span>, <span class="cm-number">1000</span>); <span class="cm-comment">//剩余多少游戏币</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">REMAIN_BIND_COIN</span>, <span class="cm-number">100</span>);<span class="cm-comment">// 剩余多少绑定游戏币</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ITEM_COUNT</span>, <span class="cm-number">10</span>);<span class="cm-comment">//购买道具的数量</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ITEM_NAME</span>, <span class="cm-string">"套套"</span>);<span class="cm-comment">// 道具名称</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">params</span>.<span class="cm-variable">put</span>(<span class="cm-variable">Constants</span>.<span class="cm-variable">User</span>.<span class="cm-variable">ITEM_DESC</span>, <span class="cm-string">"国庆大特价,走过路过不要错过"</span>); <span class="cm-comment">// 道具描述,可以传空串</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">uploadUserData</span>(<span class="cm-keyword">this</span>, <span class="cm-variable">params</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><h2><a name='header-c234' class='md-header-anchor '></a>3.11 用户中心或论坛接口（选接，有特殊要求才接入，一般可不接入）</h2><h3><a name='header-c235' class='md-header-anchor '></a>3.11.1 接口定义</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">/**</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* 是否存在用户中心或者论坛</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @return 若不存在,则返回""或者null;若存在则返回渠道名</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">String</span> <span class="cm-def">hasUserCenter</span>() {}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">/**</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* 打开用户中心或者论坛</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param activity 游戏主activity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">* @param callback 回调类</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">openUserCenter</span>(<span class="cm-keyword">final</span> <span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>, <span class="cm-keyword">final</span> <span class="cm-variable">IDispatcherCb</span> <span class="cm-variable">callback</span>) {}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><h3><a name='header-c238' class='md-header-anchor '></a>3.11.2 示例</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable-3">String</span> <span class="cm-variable">userCenter</span> <span class="cm-operator">=</span> <span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">hasUserCenter</span>();</span></pre></div><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">Log</span>.<span class="cm-variable">i</span>(<span class="cm-variable">TAG</span>, <span class="cm-string">"userCenter = "</span> <span class="cm-operator">+</span> <span class="cm-variable">userCenter</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">switch</span> (<span class="cm-variable">userCenter</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">case</span> <span class="cm-string">"ysdk"</span>:<span class="cm-comment">//ysdk存在论坛</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">Log</span>.<span class="cm-variable">i</span>(<span class="cm-variable">TAG</span>, <span class="cm-string">"调用 ChannelInterface.openUserCenter"</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">ChannelInterface</span>.<span class="cm-variable">openUserCenter</span>(<span class="cm-keyword">this</span>, <span class="cm-keyword">new</span> <span class="cm-variable">IDispatcherCb</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-meta">@Override</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onFinished</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">retCode</span>, <span class="cm-variable">JSONObject</span> <span class="cm-variable">data</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">if</span> (<span class="cm-variable">retCode</span> <span class="cm-operator">==</span> <span class="cm-variable">Constants</span>.<span class="cm-variable">ErrorCode</span>.<span class="cm-variable">ERR_OK</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">Log</span>.<span class="cm-variable">i</span>(<span class="cm-variable">TAG</span>, <span class="cm-string">"open user center success"</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">Log</span>.<span class="cm-variable">w</span>(<span class="cm-variable">TAG</span>, <span class="cm-string">"open user center fail"</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  });</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">break</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">case</span> <span class="cm-string">""</span>:<span class="cm-comment">//没有用户中心或论坛</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">break</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 437px;"></div></div></div></pre><h1><a name='header-c240' class='md-header-anchor '></a>4 其他注意事项</h1><ul><li>务必在ChannelInterface.login()的回调中向游戏服务端请求用户信息，再调用hannelInterface.onLoginRsp()方法，将用户信息返回给SDK。</li><li>务必调用uploadUserData()方法，很多SDK（如UC）必须调用这个接口方能审核通过。</li></ul><ul><li><p>清单文件配置，android:installLocation=&quot;preferExternal&quot;这个属性会影响到有些机子无法安装的，请改成auto。</p></li><li><p>资源文件的引用请务必不要使用R文件引用方式，请使用Context.getResources().getIdentifier的方式来引用。具体操作请参考ResourceUtils.java</p></li><li><p>游戏自身资源文件命名和里边的内容的key值请加上前缀，如xxxx_strings.xml</p><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">string</span> <span class="cm-attribute">name</span>=<span class="cm-string">"junhai_appname"</span><span class="cm-tag cm-bracket">&gt;</span>君海SDK<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">string</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre></li><li><p>请删除无关的所有资源文件，如创建工程时IDE自动生成的资源文件。</p></li><li><p>强烈建议在收到初始化成功回调后，再进入到游戏登录主界面。因为有一些渠道会有这样的要求：先出现他们的闪屏，再显示游戏界面。</p></li><li><p>如果游戏使用自己的V4包版本不能低于23，否则的话使用SDK的V4包。</p></li><li><p>游戏自己定义的activity，其android:configChanges属性，至少包含&quot;keyboardHidden|orientation|screenSize&quot;    或者更多。</p></li><li><p>如果游戏客户端有接入第三方SDK，如信鸽，个推SDK，请务必知会君海客户端技术。因为这些SDK的清单配置，需要根据游戏包名来动态配置provide，service。如果这些配置都相同，可能会导致同一个游戏包，不同渠道，在同一部手机上，只能安装一个渠道。</p></li></ul></div>
</body>
</html>